{% extends 'radabo/base.html' %}
{% block pagetitle %}User Stories - {{projectName}}{% endblock %}
{% block title %}
  <div class="row">
  <div class="col-sm-1"></div>
  <div class="col-sm-7">
    <h2>{{projectName}}</h2>
  </div>
  <div id="export" style="display:none" class="col-sm-2">
  {% if data %}
    <span title="Download"><button id="btnExport" class="btn btn-success glyphicon glyphicon-download-alt pull-right" onclick="window.open('data:application/vnd.ms-excel,'+encodeURIComponent(document.getElementById('data').outerHTML));"></button></span>
  {% endif %}
  </div>
  <script>
    var ua=window.navigator.userAgent;
    if(ua.indexOf('Chrome') != -1){document.getElementById('export').style.display='none'}
    else {document.getElementById('export').style.display=''}
  </script>
  <div class="col-sm-2"></div>
</div>
{% endblock %}
{% block primary %}
  <div class="row">
    <div class="col-sm-1"></div>
    <div id="data" class="col-sm-9">
      {% if data %}
        {% regroup data by feature as story %}
        <table class="table table-striped table-hover" style="font-size: 16px">
          <thead>
            <tr>
              <th>User Story</th>
              <th>Description</th>
              <th>State</th>
              <th>Story Points</th>
              <th>Owner</th>
            </tr>
          </thead>
          <tbody>
        {% for y in story %}
            <tr>
              <td><i><b>{{y.grouper}}</b></i></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            {% for x in y.list %}
              <tr>
                <td>{{x.id}}</td>
                <td>{{x.name}}</td>
                <td>{{x.status}}</td>
                <td>{{x.points}}</td>
                <td>{{x.owner}}</td>
              </tr>
            {% endfor %}
        {% endfor %}
          </tbody>
        </table>
      {% else %}
        <strong>No data passed in</strong>
      {% endif %}
    </div>
    <div class="col-sm-2"></div>
  </div>
{% endblock %}
